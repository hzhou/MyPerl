macros:
    KEY_FN_LIST:: join

subcode:: define_ops
    $map define_op, join

subcode:: reduce_keyword_prefix
    case WORD_join:
        $if $(term)->type == OP_LIST
            $call new_op, op, OP_join, $(term)
        $else
            $call error, "join takes a list"
        break

subcode:: eval_op_cases
    case OP_join:
        sv_b = eval_list(NULL, $(R), $(CTX))
        av = $(sv_av:sv_b)
        sv_sep = AV_shift(av)
        sv_1st = AV_shift(av)
        sv = do_string(sv_1st)
        &call av_each, av
            SV_append_sv(sv, sv_sep)
            SV_append_sv(sv, $(sv))
        $map ret_svreg, sv_1st, sv_b, sv_sep
        return sv
