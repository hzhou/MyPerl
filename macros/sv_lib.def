subcode: _autoload
    # $list Perl_newSV
    $(set:sv1) join, ',', SVt_*
        NULL,IV,NV,RV,PV
    $(set:sv2) join, ',', SVt_PV*
        IV,NV,MG,BM,LV,AV,HV,CV,GV,FM,IO
    $enum(svtype) $(sv1),$(sv2)

    $call register_sv_types
    
    $(for:IOK,NOK,POK,ROK and 1,2,4,8)
        $define(SVf_$1) 0x000$20000
    $(for:FAKE,OOK,BREAK,READONLY and 1,2,4,8)
        $define(SVf_$1) 0x00$200000
    $(for:IOK,NOK,POK,SCREAM and 1,2,4,8)
        $define(SVp_$1) 0x0$2000000
    $(for:AMAGIC,UTF8 and 1,2)
        $define(SVf_$1) 0x$20000000
    $define(SVf_OK) 0x070f

    $(for:ARGV,START,FLUSH,DIDTOP,UNTAINT,NOLINE,FAKE_DIRP and 0x0-6)
        $define IOf_$1 $2

    $struct(STRUCT_SV) sv_any, sv_refcnt, sv_flags
    $struct(xpv) xpv_pv, xpv_cur, xpv_len
    $struct(xpviv) class xpv, xiv_iv
    $struct(xpvuv) class xpv, xuv_uv
    $struct(xpvnv) class xpv, xiv_iv, xnv_nv
    $struct(xpvmg) class xpvnv, xmg_magic, xmg_stash
    $struct(xpvlv) class xpvmg, xlv_targoff, xlv_targlen, xlv_targ, xlv_type
    $struct(xpvgv) class xpvmg, xgv_gp, xgv_name, xgv_namelen, xgv_stash, xgv_flags
    $struct(xpvbm) class xpvmg, xbm_useful, xbm_previous, xbm_rare
    $struct(xpvfm) class xpvmg, xcv_stash, xcv_start, xcv_root, xcv_xsub, xcv_xsubany, xcv_gv, xcv_file, xcv_depth, xcv_padlist, xcv_outside, xcv_flags, xfm_lines
    $struct(xpvio) class xpvmg, xio_ifp, xio_ofp
    $struct(xpvio) union xio_dirpu
    $union DIR* xiou_dirp, void* xiou_any
    $struct(xpvio) xio_lines, xio_page, xio_page_len, xio_lines_left, xio_top_name, xio_top_gv, xio_fmt_name, xio_fmt_gv, xio_bottom_name, xio_bottom_gv, xio_subprocess,, xio_type, xio_flags

subcode: register_sv_types
    $register_name(sv_any) void*
    $(for:refcnt,flags)
        $register_name(sv_$1) U32
    $register_name(xpv_pv) char*
    $(for:cur,len)
        $register_name(xpv_$1) STRLEN
    $register_name(xiv_iv) IV
    $register_name(xuv_uv) UV
    $register_name(xnv_nv) NV
    $register_name(xmg_magic) MAGIC*
    $register_name(xmg_stash) HV*
    $(for:targoff,targlen,targ,type and STRLEN,STRLEN,SV*,char)
        $register_name(xlv_$1) $2
    $(for:gp,name,namelen,stash,flags and GP*,char*,STRLEN,HV*,U8)
        $register_name(xgv_$1) $2
    $(for:useful,previous,rare and I32,U16,U8)
        $register_name(xbm_$1) $2
    $fntype void (*FnSub)(CV*)
    $(for:stash,start,root,xsub,xsubany,gv,file,depth,padlist,outside,flags and HV*,OP*,OP*,FnSub,ANY,GV*,char*,long,AV*,CV*,cv_flag_t)
        $register_name(xcv_$1) $2
    $register_name(xfm_lines) I32
    $(for:ifp,ofp)
        $register_name(xio_$1) PerlIO*
    $(for:lines,page,page_len,lines_left)
        $register_name(xio_$1) long
    $(for:top,fmt,bottom)
        $register_name(xio_$1_name) char*
        $register_name(xio_$1_gv) GV*
    $(for:subprocesses,type,flags and short,char,char)
        $register_name(xio_$1) $2

